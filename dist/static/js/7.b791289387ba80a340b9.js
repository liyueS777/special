webpackJsonp([7],{KwBj:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("2hMI"),s=/^[0-9]*$/,i={data:function(){return{runDataMessage:{lastMonthActivateCount:0,overdueCount:0,thisMonthActivateCount:0,totalCount:0,usableCount:0},searchFlag:!1,phone:"",runList:[],pageSize:10,currentPage:1,totalCount:0}},created:function(){this.getRunList(this.currentPage,this.pageSize,1),this.getRunData()},methods:{whenNull:function(t){t||this.getRunList(1,this.pageSize,1)},searchByPhone:function(){this.getRunList(1,this.pageSize,2)},getRunData:function(){var t=this;Object(a.f)().then(function(e){1==e.code?t.runDataMessage=e.data:t.$message.warning("查询设备运数据统计异常~")}).catch(function(t){})},getRunList:function(t,e,n){var i=this,l={page:t,limit:e};if(2==n){if(!this.phone||this.phone.trim(),!s.test(this.phone))return void this.$message.warning("输入的内容格式不正确，必须是数字类型~");l.phone=this.phone}Object(a.g)(l).then(function(t){1==t.code?(2==n&&(i.currentPage=1,i.searchFlag=!0),i.runList=t.data.equipmentsList,i.totalCount=t.data.totalCount):i.$message.warning("查询设备运行列表数据异常~")}).catch(function(t){})},handleRunlist:function(t){if(this.currentPage=t,this.searchFlag&&this.phone)var e=2;else e=1;this.getRunList(t,this.pageSize,e)},getRowClass:function(t){t.row,t.column;var e=t.rowIndex;t.columnIndex;return 0==e?"background:#409eff;color:#fff":""}}},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"runList"},[n("el-row",{staticClass:"runList-module bg-shadow",attrs:{gutter:20}},[n("el-col",{attrs:{span:3}},[n("div",{staticClass:"num"},[t._v("设备总数："+t._s(t.runDataMessage.totalCount))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"num"},[t._v("正常设备："+t._s(t.runDataMessage.usableCount))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"num"},[t._v("过期设备："+t._s(t.runDataMessage.overdueCount))])])],1),t._v(" "),n("el-row",{staticClass:"runList-module bg-shadow",attrs:{gutter:20}},[n("el-col",{attrs:{span:3}},[n("div",{staticClass:"num"},[t._v("上月新激活："+t._s(t.runDataMessage.lastMonthActivateCount))])]),t._v(" "),n("el-col",{attrs:{span:3}},[n("div",{staticClass:"num"},[t._v("本月新激活："+t._s(t.runDataMessage.thisMonthActivateCount))])])],1),t._v(" "),n("div",{staticClass:"line-l bg-shadow"},[n("el-input",{staticClass:"input-with-select",staticStyle:{width:"300px","margin-right":"10px"},attrs:{placeholder:"请输入用户手机号查询"},on:{input:t.whenNull},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.searchByPhone(e):null}},model:{value:t.phone,callback:function(e){t.phone=e},expression:"phone"}},[n("el-button",{attrs:{slot:"append",icon:"el-icon-search",size:"mini"},nativeOn:{click:function(e){return t.searchByPhone(e)}},slot:"append"})],1)],1),t._v(" "),n("el-table",{ref:"multipleTable",staticClass:"runListData bg-shadow",attrs:{"header-row-class-name":"myTablee","header-cell-style":t.getRowClass,fit:!0,border:"",stripe:"",data:t.runList,"tooltip-effect":"dark"}},[n("el-table-column",{attrs:{"row-class-name":"rdd",align:"center","header-align":"center",type:"index",width:"60",label:"编号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"account",label:"用户账号",width:"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.phone))]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"deadline",label:"激活时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("translateToDate")(e.row.activateTime))+"\n                      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"deadline",width:"120",label:"续费次数"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(e.row.renewCount)+"\n                      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"deadline",label:"有效截止时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(t._f("translateToDate")(e.row.validTime))+"\n                      ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center","header-align":"center",prop:"status",label:"程序状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                        "+t._s(0==e.row.equipmentState?"已过期":1==e.row.equipmentState?"未过期":"未激活")+"\n                      ")]}}])})],1),t._v(" "),n("el-pagination",{staticClass:"pages bg-shadow",attrs:{"page-size":t.pageSize,background:"","current-page":t.currentPage,layout:"total,prev, pager, next",total:t.totalCount},on:{"current-change":t.handleRunlist}})],1)},staticRenderFns:[]};var r=n("VU/8")(i,l,!1,function(t){n("LR1F")},null,null);e.default=r.exports},LR1F:function(t,e){}});