webpackJsonp([5],{er4C:function(e,r){},xBd8:function(e,r,i){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var l=i("2hMI"),t={components:{uploadFile:function(e){i.e(10).then(function(){var r=[i("hYS1")];e.apply(null,r)}.bind(this)).catch(i.oe)}},data:function(){var e=/^[0-9]*[1-9][0-9]*$/;return{dialogVisible:!1,fileList:[],levelList:[{label:"普通级别",id:1},{label:"一般级别",id:2}],appTypes:[{label:"IOS",id:1},{label:"Android",id:2}],fileForm:{versionName:"",versionNumber:"",desc:"",url:"",packageName:""},rules:{versionNumber:[{required:!0,validator:function(r,i,l){i&&i.trim()?e.test(i)?i.indexOf(".")>-1?l(new Error("版本号必须是正整数,不能有小数点")):l():l(new Error("版本号必须是正整数,请输入正确的版本号格式")):l(new Error("版本号不能为空"))},trigger:"blur"}],url:[{required:!0,validator:function(e,r,i){r&&r.trim()?i():i(new Error("上传的文件不能为空"))},trigger:"blur"}],packageName:[{required:!0,message:"请先填写文件包名称",trigger:"blur"}]}}},created:function(){},methods:{close:function(){this.$router.push("/")},handleUploadSuccess:function(e){this.fileForm.url=e.data.url,this.fileList[0]={name:e.data.name,url:e.data.url}},handleUploadRemove:function(e){this.fileForm.url="",this.fileList=[]},submitForm:function(e){var r=this;this.$refs[e].validate(function(e){if(!e)return r.$message.warning("请先填写完参数~"),!1;Object(l.m)(r.fileForm).then(function(e){1==e.code?(r.$message.success("数据提交成功~~"),r.dialogVisible=!0):r.$message.warning("数据提交异常，请稍后再试~~")}).catch(function(e){r.$message.warning("数据提交异常，请稍后再试~~")})})},resetForm:function(e){this.$refs[e].resetFields()}}},o={render:function(){var e=this,r=e.$createElement,i=e._self._c||r;return i("div",{staticClass:"fileUpload-m"},[i("div",{staticClass:"line-l bg-shadow"},[i("el-form",{ref:"fileForm",staticClass:"file-ruleForm",attrs:{model:e.fileForm,rules:e.rules,"label-width":"100px"}},[i("el-form-item",{attrs:{label:"版本名称",prop:"versionName"}},[i("el-input",{attrs:{placeholder:"请填写版本名称"},model:{value:e.fileForm.versionName,callback:function(r){e.$set(e.fileForm,"versionName","string"==typeof r?r.trim():r)},expression:"fileForm.versionName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"版本号",prop:"versionNumber"}},[i("el-input",{attrs:{placeholder:"请填写版本号"},model:{value:e.fileForm.versionNumber,callback:function(r){e.$set(e.fileForm,"versionNumber","string"==typeof r?r.trim():r)},expression:"fileForm.versionNumber"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"版本描述",prop:"desc"}},[i("el-input",{attrs:{placeholder:"请填写版本描述"},model:{value:e.fileForm.desc,callback:function(r){e.$set(e.fileForm,"desc","string"==typeof r?r.trim():r)},expression:"fileForm.desc"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"文件",prop:"url"}},[i("upload-file",{attrs:{fileList:e.fileList},on:{uploadSuccess:e.handleUploadSuccess,uploadRemove:e.handleUploadRemove}})],1),e._v(" "),i("el-form-item",{attrs:{label:"文件包名称",prop:"packageName"}},[i("el-input",{attrs:{placeholder:"请填写文件包名称"},model:{value:e.fileForm.packageName,callback:function(r){e.$set(e.fileForm,"packageName","string"==typeof r?r.trim():r)},expression:"fileForm.packageName"}})],1),e._v(" "),i("el-form-item",[i("el-button",{attrs:{type:"primary",size:"small"},nativeOn:{click:function(r){e.submitForm("fileForm")}}},[e._v("立即提交")]),e._v(" "),i("el-button",{attrs:{size:"small"},nativeOn:{click:function(r){e.resetForm("fileForm")}}},[e._v("重置")])],1)],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"提交后-信息展示",visible:e.dialogVisible,"close-on-click-modal":!1,"show-close":!1,width:"40%"},on:{"update:visible":function(r){e.dialogVisible=r},close:e.close}},[i("span",[e._v("版本名称： "+e._s(e.fileForm.versionName))]),i("br"),e._v(" "),i("span",[e._v("版本号：   "+e._s(e.fileForm.versionNumber))]),i("br"),e._v(" "),e.fileForm.desc.trim()?i("span",[e._v("版本描述： "+e._s(e.fileForm.desc))]):e._e(),i("br"),e._v(" "),i("span",[e._v("文件路径： "+e._s(e.fileForm.url))]),i("br"),e._v(" "),i("span",[e._v("文件包名称: "+e._s(e.fileForm.packageName))]),i("br"),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{attrs:{type:"primary"},on:{click:function(r){e.dialogVisible=!1}}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var s=i("VU/8")(t,o,!1,function(e){i("er4C")},null,null);r.default=s.exports}});